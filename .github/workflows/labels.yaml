---
name: Labels
"on":
  push:
    branches:
      - main

jobs:

  generate-labels:
    name: Generate extra labels
    runs-on: ubuntu-slim
    steps:
      - uses: actions/checkout@v6.0.2
      - uses: astral-sh/setup-uv@v7.3.0
      - name: Generate labels
        run: >
          uv --no-progress run --frozen --all-extras --
          python -c 'from meta_package_manager.labels import write_labels; write_labels()'
      - uses: peter-evans/create-pull-request@v8.1.0
        with:
          assignees: ${{ github.actor }}
          commit-message: "[github] Update extra labels"
          title: "[github] Update extra labels"
          body: >
            <details><summary><code>Workflow metadata</code></summary>


            > [Auto-generated on run `#${{ github.run_id }}`](${{ github.event.repository.html_url }}/actions/runs/${{
            github.run_id }}) by `${{ github.job }}` job from [`labels.yaml`](${{ github.event.repository.html_url
            }}/blob/${{ github.sha }}/.github/workflows/labels.yaml) workflow.


            </details>
          labels: "ğŸ¤– ci"
          branch: update-labels
          add-paths: |
            .github/labels-extra.json

  labels:
    uses: kdeldycke/workflows/.github/workflows/labels.yaml@v4.25.5
    needs: generate-labels
    with:
      extra-label-files: |
        .github/labels-extra.json
      extra-file-rules: |
        "ğŸ”Œ bar-plugin":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/bar_plugin/*
              - tests/*bar_plugin*

        "ğŸ“¦ manager: apm":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/apm*
              - tests/*apm*

        "ğŸ“¦ manager: cargo":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/cargo*
              - tests/*cargo*

        "ğŸ“¦ manager: choco":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/chocolatey*
              - tests/*chocolatey*

        "ğŸ“¦ manager: composer":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/composer*
              - tests/*composer*

        "ğŸ“¦ manager: dnf-based":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/dnf*
              - tests/*dnf*

        "ğŸ“¦ manager: dpkg-based":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/apt*
              - meta_package_manager/managers/dpkg*
              - meta_package_manager/managers/opkg*
              - tests/*apt*
              - tests/*dpkg*
              - tests/*opkg*

        "ğŸ“¦ manager: emerge":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/emerge*
              - tests/*emerge*

        "ğŸ“¦ manager: eopkg":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/eopkg*
              - tests/*eopkg*

        "ğŸ“¦ manager: flatpak":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/flatpak*
              - tests/*flatpak*

        "ğŸ“¦ manager: fwupd":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/fwupd*
              - tests/*fwupd*

        "ğŸ“¦ manager: gem":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/gem*
              - tests/*gem*

        "ğŸ“¦ manager: homebrew":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/homebrew*
              - tests/*homebrew*

        "ğŸ“¦ manager: mas":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/mas*
              - tests/*mas*

        "ğŸ“¦ manager: mpm":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/*

        "ğŸ“¦ manager: npm-based":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/npm*
              - meta_package_manager/managers/yarn*
              - tests/*npm*
              - tests/*yarn*

        "ğŸ“¦ manager: pacman-based":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/pacman*
              - meta_package_manager/managers/pacaur*
              - meta_package_manager/managers/paru*
              - meta_package_manager/managers/yay*
              - tests/*pacman*
              - tests/*pacaur*
              - tests/*paru*
              - tests/*yay*

        "ğŸ“¦ manager: pip-based":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/pip*
              - tests/*pip*

        "ğŸ“¦ manager: pkg":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/pkg*

        "ğŸ“¦ manager: scoop":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/scoop*
              - tests/*scoop*

        "ğŸ“¦ manager: snap":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/snap*
              - tests/*snap*

        "ğŸ“¦ manager: steamcmd":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/steamcmd*
              - tests/*steamcmd*

        "ğŸ“¦ manager: uv-based":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/uv*
              - tests/*uv*

        "ğŸ“¦ manager: vscode-based":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/vscode*
              - tests/*vscode*

        "ğŸ“¦ manager: winget":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/winget*
              - tests/*winget*

        "ğŸ“¦ manager: zypper":
          - changed-files:
            - any-glob-to-any-file:
              - meta_package_manager/managers/zypper*
              - tests/*zypper*
      extra-content-rules: |
        "ğŸ”Œ bar-plugin":
          - "xbar"
          - "swiftbar"
          - "plugin"

        "ğŸ“¦ manager: apm":
          - "apm"
          - "atom"

        "ğŸ“¦ manager: cargo":
          - "cargo"
          - "rust"
          - "crate"

        "ğŸ“¦ manager: choco":
          - "choco"
          - "chocolatey"

        "ğŸ“¦ manager: composer":
          - "composer"
          - "php"

        "ğŸ“¦ manager: dnf-based":
          - "dnf"
          - "yum"
          - "rpm"
          - "fedora"
          - "redhat"
          - "rhel"

        "ğŸ“¦ manager: dpkg-based":
          - "apt"
          - "apt-mint"
          - "aptitude"
          - "dpkg"
          - "opkg"
          - "ubuntu"
          - "debian"
          - "mint"

        "ğŸ“¦ manager: emerge":
          - "emerge"
          - "portage"
          - "gentoo"

        "ğŸ“¦ manager: eopkg":
          - "eopkg"
          - "solus"

        "ğŸ“¦ manager: flatpak":
          - "flatpak"
          - "flat"

        "ğŸ“¦ manager: fwupd":
          - "fwupd"
          - "fwupdmgr"
          - "lvfs"

        "ğŸ“¦ manager: gem":
          - "gem"
          - "ruby"

        "ğŸ“¦ manager: homebrew":
          - "brew"
          - "cask"
          - "homebrew"
          - "tap"
          - "formula"

        "ğŸ“¦ manager: mas":
          - "mas"
          - "app store"
          - "app-store"

        "ğŸ“¦ manager: npm-based":
          - "npm"
          - "node"
          - "yarn"

        "ğŸ“¦ manager: pacman-based":
          - "pacman"
          - "arch"
          - "pacaur"
          - "paru"
          - "yay"

        "ğŸ“¦ manager: pip-based":
          - "pip"
          - "pipx"

        "ğŸ“¦ manager: pkg":
          - "pkg"

        "ğŸ“¦ manager: scoop":
          - "scoop"

        "ğŸ“¦ manager: snap":
          - "snap"

        "ğŸ“¦ manager: steamcmd":
          - "steamcmd"
          - "steam"
          - "valve"

        "ğŸ“¦ manager: uv-based":
          - "uv"
          - "uvx"

        "ğŸ“¦ manager: vscode-based":
          - "vscode"
          - "vscodium"
          - "visual studio code"
          - "visual studio"

        "ğŸ“¦ manager: winget":
          - "winget"

        "ğŸ“¦ manager: zypper":
          - "zypper"
          - "opensuse"
          - "suse"

        "ğŸ–¥ platform: BSD":
          - "bsd"

        "ğŸ–¥ platform: Linux":
          - "linux"

        "ğŸ–¥ platform: macOS":
          - "macos"
          - "mac os"
          - "osx"
          - "os x"
          - "apple"

        "ğŸ–¥ platform: Unix":
          - "unix"

        "ğŸ–¥ platform: Windows":
          - "windows"
          - "c:"
          - "microsoft"